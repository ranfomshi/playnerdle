<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ball Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f5f5f5;
        }

        #gameZone {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 50px;
            border: 1px solid #000;
            overflow: hidden;
            margin-bottom: 20px;
        }

        #ball {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: red;
            border-radius: 50%;
        }

        #targetZone {
            position: absolute;
            width: 100px;
            height: 50px;
            background-color: #00ff0040;
            left: 50%;
            transform: translateX(-50%);
        }

        #errorIndicator {
            position: absolute;
            width: 5px;
            height: 50px;
            background-color: blue;
            display: none;
        }

        #message {
            font-size: 24px;
            margin-top: 20px;
        }

        #level {
            font-size: 18px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div id="level">Level: 1</div>
    <div id="gameZone">
        <div id="targetZone"></div>
        <div id="ball"></div>
        <div id="errorIndicator"></div>
    </div>
    <div id="message"></div>

    <script>
        let ball = document.getElementById("ball");
        let gameZone = document.getElementById("gameZone");
        let messageDiv = document.getElementById("message");
        let levelDiv = document.getElementById("level");
        let errorIndicator = document.getElementById("errorIndicator");
        let direction = 1; // 1 means right, -1 means left
        let speed = 2; // Starting speed
        let level = 1;
        let interval;
        let transparentInterval;

        const moveBall = () => {
            let ballPosition = ball.offsetLeft;
            if (ballPosition <= 0) {
                direction = 1; // Move right
            } else if (ballPosition >= gameZone.offsetWidth - ball.offsetWidth) {
                direction = -1; // Move left
            }
            ball.style.left = ballPosition + (direction * speed) + "px";
        };

        const checkWin = () => {
            // Calculate the center position of the ball
            let ballCenterPosition = ball.offsetLeft + ball.offsetWidth / 2;
            let targetPosition = gameZone.offsetWidth / 2 - 50; // Target zone is centered

            if (ballCenterPosition >= targetPosition && ballCenterPosition <= targetPosition + 100) {
                messageDiv.textContent = "Success!";
                level++;
                speed += 0.5; // Increase speed for next level
            } else {
                messageDiv.textContent = "Try Again!";
                // Position errorIndicator at the center of the ball
                errorIndicator.style.left = ballCenterPosition - errorIndicator.offsetWidth / 2 + "px";
                errorIndicator.style.display = "block";
            }
            levelDiv.textContent = "Level: " + level;
            clearInterval(interval);
            setTimeout(startGame, 2000); // Restart game after 2 seconds
        };

        const enableClicks = () => {
            document.body.style.pointerEvents = "auto"; // Enable clicks
        };

        const makeTransparent = () => {
            ball.style.opacity = "0";
            enableClicks(); // Allow clicking once the ball is transparent
        };

        const startGame = () => {
            // Clear existing timeouts and intervals
            clearTimeout(transparentInterval);
            clearInterval(interval);
            
            ball.style.left = "0px";
            ball.style.opacity = "1";
            document.body.style.pointerEvents = "none"; // Disable clicks again
            messageDiv.textContent = ""; // Clear previous message
            errorIndicator.style.display = "none";
            interval = setInterval(moveBall, 50); // Refresh every 50ms
            transparentInterval = setTimeout(makeTransparent, 5000); // Make transparent after 5 seconds
            
            // Remove any previous click event listeners
            document.body.removeEventListener("click", checkWin);
        };

        document.body.addEventListener("click", checkWin);
        
        // Start the game for the first time
        startGame();
    </script>
</body>
</html>
